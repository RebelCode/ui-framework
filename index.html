<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>booking-str</title>
  </head>
  <body>
    <div id="app"></div>
    <div id="new-app">
      <hello></hello>
    </div>

    <div class="next-app">
      <hello></hello>
    </div>

    <div class="next-app">
      <hello></hello>
    </div>

    <script type="text/x-template" id="template1">
      <span>{{ translate('Test') }}</span>
    </script>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // get default configuration inside the Bottle instance
        require.config({
          paths: {
            textFormater: 'https://unpkg.com/sprintf-js@1.1.1/dist/sprintf.min',
            bottle: 'https://cdnjs.cloudflare.com/ajax/libs/bottlejs/1.6.1/bottle.min',
            vue: 'https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.4/vue.min'
          }
        });

        function defineServices (di, dependecies) {
          di.factory('translator', function () {
            return new dependecies.UiFramework.I18n.FormatTranslator(dependecies.textFormater.sprintf)
          })
          di.factory('translate', function (container) {
            return function (format, params, context) {
              return container.translator.translate(format, params)
            }
          })
          di.factory('selectorList', function () {
            return [
              '#app',
              '#new-app',
              '.next-app'
            ]
          })
          di.factory('components', function () {
            return {
              hello: {
                template: '#template1',
                inject: ['translate']
              }
            }
          })
          di.factory('document', function () {
            return document
          })
          di.factory('vue', function () {
            return dependecies.vue
          })
        }

        require(['ui-framework', 'textFormater', 'bottle', 'vue'], function(UiFramework, textFormater, bottle, vue) {

          var di = new bottle()
          defineServices(di, {
            bottle: bottle,
            UiFramework: UiFramework,
            textFormater: textFormater,
            vue: vue
          })
          var container = new UiFramework.Container.Container(di)
          var NewApp = new UiFramework.Core.App(container)
          NewApp.init()
        });
      });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.5/require.js"></script>
  </body>
</html>
